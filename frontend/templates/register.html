{% extends "base.html" %}
{% block content %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">

  <section class="login-section">
    <h2 class="login-title">ğŸ“ Crie sua Conta</h2>

    <form method="POST" action="{{ url_for('register') }}" class="login-form" autocomplete="off">
      <label for="username">UsuÃ¡rio</label>
      <input type="text" name="username" id="username" placeholder="Escolha um nome de usuÃ¡rio" required autocomplete="off">

      <label for="password">Senha</label>
      <input type="password" name="password" id="password" placeholder="Crie uma senha segura" required autocomplete="new-password">

      <button type="submit" class="btn btn-primary">Registrar</button>
    </form>

    <div class="register-link">
      <p>ğŸ”™ JÃ¡ tem conta?</p>
      <a href="{{ url_for('login') }}" class="btn btn-secondary">Voltar para o login</a>
    </div>
  </section>

  <div id="flash-container" class="flash-container"></div>

  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const flashContainer = document.getElementById('flash-container');
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% for category, message in messages %}
        if (flashContainer && "{{ message|e }}".trim()) {
          flashContainer.className = 'flash-container flash-' + ('{{ category }}' === 'error' ? 'error' : 'success');
          flashContainer.innerHTML = `<span class="flash-icon"></span> {{ message|e }}`;
          setTimeout(() => flashContainer.classList.add('show'), 100);
          setTimeout(() => {
            flashContainer.classList.remove('show');
            setTimeout(() => flashContainer.innerHTML = '', 300);
          }, 4000);
        }
      {% endfor %}
    {% endwith %}
  });
  </script>
{% endblock %}