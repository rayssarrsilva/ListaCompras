{% extends "base.html" %}

{% block content %}

    <!-- Criar novo carrinho -->
    <section class="form-section">
        <h2>Criar Novo Carrinho</h2>
        <form action="create_cart" method="post" class="add-form">
            <input type="text" name="cart_name" placeholder="Nome do carrinho" required>
            <button type="submit">Criar Carrinho</button>
        </form>
    </section>

    <!-- Seleção de carrinho -->
    <div class="carts-container">
        {% for cart in carts %}
        <div class="cart-card" id="cart-{{ cart.id }}">
            <img src="{{ url_for('static', filename='cart.png') }}" alt="Carrinho" class="cart-icon">
            <h3>
                {{ cart.name }}
                <span class="status-dot" id="dot-{{ cart.id }}"></span>
            </h3>

            <div class="card-actions">
                <button class="btn" onclick="toggleSelect({{ cart.id }}, '{{ cart.name }}')">Selecionar</button>
                <button class="btn edit" onclick="abrirPergaminho({{ cart.id }})">Ver Itens</button>
            </div>

            <div class="cart-items" id="items-{{ cart.id }}" style="display: none;">
                <ul>
                    {% for item in cart.items %}
                    <li>{{ item.name }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endfor %}
    </div>

    <!-- Modal do Pergaminho -->
    <div id="pergaminho-overlay"></div>
    <div id="pergaminho-modal">
        <button id="fechar-pergaminho">✖</button>
        <h3>Itens do Carrinho</h3>
        <ul id="lista-itens-modal"></ul>
    </div>

    <audio id="som-pergaminho" src="{{ url_for('static', filename='scroll-open.mp3') }}"></audio>
    <div id="manage-container"></div>
{% endblock %}